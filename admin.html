<!DOCTYPE html>
<html>
<head><title>Admin Control</title></head>
<body style="background:#000; color:#fff; padding:50px; font-family:sans-serif;">
    <div id="auth" style="text-align:center;">
        <h2>üîê ADMIN ACCESS</h2>
        <input type="password" id="pass" placeholder="Password" style="padding:10px;"> <button onclick="login()">LOGIN</button>
    </div>
    <div id="main" style="display:none;">
        <h2 style="color:#FFD700">Pending Approvals</h2>
        <div id="list"></div>
    </div>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
    <script>
        firebase.initializeApp({databaseURL: "https://the-10-million-pixels-plus-default-rtdb.firebaseio.com/"});
        const db = firebase.database();
        function login(){ if(document.getElementById('pass').value==='KAWSARahmed22@@'){document.getElementById('auth').style.display='none';document.getElementById('main').style.display='block';load();} }
        function load(){
            db.ref('pending_orders').on('value', s => {
                const l = document.getElementById('list'); l.innerHTML = "";
                const d = s.val(); if(!d) return l.innerHTML="No orders.";
                Object.keys(d).forEach(id => {
                    l.innerHTML += `<div style="border:1px solid #FFD700; padding:20px; margin-bottom:10px;">
                        ${d[id].name} - ${d[id].pixelCount} Pixels<br>
                        <input type="text" id="img_${id}" placeholder="Image Direct URL" style="width:300px; padding:5px;"><br>
                        <input type="text" id="url_${id}" placeholder="Brand Website URL" style="width:300px; padding:5px; margin-top:5px;"><br>
                        <button onclick="app('${id}')" style="background:green; color:#fff; padding:10px; margin-top:10px;">APPROVE & LIVE</button>
                    </div>`;
                });
            });
        }
        function app(id){
            const img = document.getElementById('img_'+id).value;
            const url = document.getElementById('url_'+id).value;
            db.ref('pending_orders/'+id).once('value', s => {
                let data = s.val(); data.imageUrl = img; data.websiteUrl = url;
                db.ref('pixels/'+id).set(data).then(()=>db.ref('pending_orders/'+id).remove());
                alert("Live Now!");
            });
        }
    </script>
</body>
</html>
